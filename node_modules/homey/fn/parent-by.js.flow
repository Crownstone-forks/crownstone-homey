/*!
 * homey v0.1.0-beta.13
 * https://github.com/demiazz/homey
 *
 * Copyright 2017-present Alexey Plutalov <demiazz.py@gmail.com>
 * Released under the MIT license
 *
 * @flow
 */

import type { CSSSelector, Predicate } from "../types";

import matches from "./matches";
import parent from "./parent";

function parentBy(
  element: Element,
  condition: Predicate | CSSSelector
): ?Element {
  const predicate =
    typeof condition === "string" ? e => matches(e, condition) : condition;

  let current = parent(element);

  while (current) {
    if (predicate(current)) {
      return current;
    }

    current = parent(current);
  }

  return null;
}

export default parentBy;
